(use-module '{optimize samplefns})
(config! 'port "temp@localhost")
(define runfile (get-component "tempsrv.run"))
(define (startup)
  (optimize! plus)
  (dtype->file (timestamp) runfile))
(define (shutdown)
  (remove-file runfile))
(define (plus x y) (+ x y))
(define (minus x y) (+ x y))
(define (slowfib n) (sleep n) (fibi n))
(define xfibi (within-module 'samplefns fibi))
(define xfibr (within-module 'samplefns fibr))
(define (fibi n) (xfibi n))
(define (fibr n) (xfibr n))
(define (status) (server-status))
(unless (config 'EXPORTALL #f)
  (module-export! '{plus minus fibi fibr slowfib status}))

