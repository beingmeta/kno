
libzip/README:
	hg clone http://hg.nih.at/libzip
update-libzip: libzip/README
	cd libzip; hg update
	cd libzip; cmake -G "Unix Makefiles" -DCMAKE_INSTALL_PREFIX=@prefix@

libzip/lib/libzip.so: update-libzip
	cd libzip; make
build-libzip: libzip/lib/libzip.so

@prefix@/lib/libzip.so:
	cd libzip; sudo make install
install-libzip: @prefix@/lib/libzip.so

httperf-0.8.1/configure:
	wget https://httperf.googlecode.com/files/httperf-0.8.1.tar.gz
	tar -xzvf httperf-0.8.1.tar.gz

httperf-0.8.1/Makefile: httperf-0.8.1/configure
	cd httperf-0.8.1; ./configure --prefix=@prefix@

build-libzip: httperf-0.8.1/Makefile
	cd httperf-0.8.1; make

@prefix@/bin/httperf:
	cd httperf-0.8.1; sudo make install
	cd libzip; sudo make install
install-httperf: @prefix@/bin/httperf


