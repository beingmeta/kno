[Unit]
Description=Start servlet %%NAME%%
Requires=network.target local-fs.target
After=fdaemons.service fdweb.service upsource.target

[Service]
Type=simple
RemainAfterExit=true
User=www-data
Group=framerd
Environment=FD_LAUNCHER=%%NAME%%.service RUNUSER=@webuser@ RUNGROUP=@admin_group@ RUNDIR=@statedir@/servlets/ LOGDIR=@logdir@/servlets/
PassEnvironment=FD_LAUNCHER RUNUSER RUNGROUP
TimeoutStartSec=900
TimeoutStopSec=300
ExecStartPre=/bin/mkdir -p /var/run/framerd/servlets /var/log/framerd/servlets
ExecStartPre=/bin/chown www-data /var/run/framerd/servlets /var/log/framerd/servlets
ExecStartPre=/bin/chgrp framerd /var/run/framerd/servlets /var/log/framerd/servlets
ExecStartPre=/bin/chmod g+rwx /var/run/framerd/servlets /var/log/framerd/servlets
ExecStart=@prefix@/bin/fdservlet @rundir@/servlets/fathom.sock CONFIG=%%CONFIG%%

[Install]
WantedBy=default.target
