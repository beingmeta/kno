#!/bin/sh
POOL=${1:-./brico/brico.pool}
INPUTS=$(dirname ${POOL})
OUTPUTS=${2:-./fresh/}
SCRIPTBASE=$(dirname $0)
if [ ! -z "${BRICOSOURCE}" ]; then
    export KNO_BRICOSOURCE=${BRICOSOURCE};
elif test -f ./brico/brico.pool; then
    export BRICOSOURCE=./brico/;
    export KNO_BRICOSOURCE=./brico/;
fi
${SCRIPTBASE}/core.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
${SCRIPTBASE}/lattices.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
${SCRIPTBASE}/relations.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
${SCRIPTBASE}/english.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
${SCRIPTBASE}/words.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
${SCRIPTBASE}/termlogic.scm INDIR=${INPUTS} OUTDIR=${OUTPUTS} BRICOSOURCE=${KNO_BRICOSOURCE} ${POOL}
